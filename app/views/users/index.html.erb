<div class="container">
  <h1>Users</h1>
  <hr>
  <div class="page"></div>
</div>

<script type="text/template" id="editUser">
  <form class="editUserForm form-horizontal">
    <legend><%%= user ? "Update user": "Create User" %></legend>
    <div class="form-group">
      <label class="col-lg-2 control-label">Email</label>
      <div class="col-lg-10">
        <input name="email" class='form-control' value="<%%= user ? user.get('email') : "" %>" />
      </div>
    </div>
    <div class="form-group">
      <label class="col-lg-2 control-label" >Name</label>
      <div class="col-lg-10">
        <input name="name" class='form-control' value="<%%= user ? user.get('name') : "" %>" />
      </div>
    </div>
    <div class="form-group">
      <label class="col-lg-2 control-label" >Age</label>
      <div class="col-lg-10">
        <input name="age" class='form-control' value="<%%= user ? user.get('age') : "" %>" />
      </div>
    </div>
    <hr>
    <%% if(user) { %>
      <input type='hidden' name="id" value="<%%= user.id %>" %>
      <button class="btn btn-danger delete"> Delete </button>
    <%% }; %>
    <div class="form-group well">
      <div class="col-lg-offset-2 col-lg-10">
        <button type="submit" class="btn btn-default"><%%= user ? "Update user": "Create User" %></button>
        <%= image_tag "loader.gif", class: "dn loader" %>
      </div>
    </div>
  </form>
</script>

<script type="text/template" id="usersList">
<a href="#/users/new" class="btn btn-primary">New User</a>
<table class="table table-striped table-bordered">
  <thead><tr>
    <th>Email</th><th>Name</th><th>Age</th><th>Actions</th>
  </tr></thead>
  <tbody>
    <%% _.each(users, function(user){ %>
      <tr>
        <td><%%= user.get("email") %></td>
        <td><%%= user.get("name") %></td>
        <td><%%= user.get("age") %></td>
        <td><a href="#/users/<%%= user.id %>/edit" class="btn"> Edit </a></td>
      </tr>
    <%% }); %>
  </tbody>
</table>
</script>

<% content_for :js do %>
  <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js"></script>
  <%= javascript_include_tag "users.js" %>
<% end %>